---
layout: null
---
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <!-- Homepage URL -->
  <url>
    <loc>{{ site.url }}/</loc>
    <priority>1.0</priority>
    {% assign homepage = site.pages | where: "url", "/" | first %}
    {% if homepage and homepage.last_modified_at %}
      <lastmod>{{ homepage.last_modified_at | date_to_xmlschema }}</lastmod>
    {% else %}
      <lastmod>{{ site.time | date_to_xmlschema }}</lastmod>
    {% endif %}
  </url>

  <!-- Pages -->
  {% for page in site.pages %}
    {% if page.layout != "tag" and page.url != "/" %}
      <url>
        <loc>{{ site.url }}{{ page.url }}</loc>
        {% assign all_includes = "" | split: "" %}
        {% assign includes_dir = site.source + "/_includes" %}
        {% for include in site.static_files %}
          {% if include.path contains includes_dir %}
            {% assign all_includes = all_includes | push: include %}
          {% endif %}
        {% endfor %}
        
        {% assign included_file_modified = all_includes | map: "modified_time" | sort | last %}
        {% assign post_last_modified = page.last_modified_at | default: site.time %}
        {% assign last_modified = [post_last_modified, included_file_modified] | sort | last %}
        
        <lastmod>{{ last_modified | date_to_xmlschema }}</lastmod>
        <priority>0.5</priority>
      </url>
    {% endif %}
  {% endfor %}

  <!-- Posts -->
  {% for post in site.posts %}
    <url>
      <loc>{{ site.url }}{{ post.url }}</loc>
      {% assign all_includes = "" | split: "" %}
      {% assign includes_dir = site.source + "/_includes" %}
      {% for include in site.static_files %}
        {% if include.path contains includes_dir %}
          {% assign all_includes = all_includes | push: include %}
        {% endif %}
      {% endfor %}
      
      {% assign included_file_modified = all_includes | map: "modified_time" | sort | last %}
      {% assign post_last_modified = post.last_modified_at | default: site.time %}
      {% assign last_modified = [post_last_modified, included_file_modified] | sort | last %}
      
      <lastmod>{{ last_modified | date_to_xmlschema }}</lastmod>
      <priority>1.0</priority>
    </url>
  {% endfor %}
</urlset>