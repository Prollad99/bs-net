---
layout: default
---

<div class="card shadow-sm mb-2">
  <div class="card-body">
    <h1 class="card-title">{{ page.title }}</h1>
    <p class="card-subtitle text-muted mb-3">
      By <strong>{{ page.author }}</strong> |
      Last updated: <strong>{{ page.last_modified_at | date: "%B %d, %Y" }}</strong>
    </p>

    <div class="card-text">{{ content }}</div>

    {% if page.tags %}
      <div class="tags mt-3">
        <span class="badge badge-primary">Tags:</span>
        {% for tag in page.tags %}
          <a href="{{ site.baseurl }}/tag/{{ tag }}" class="badge badge-secondary">{{ tag }}</a>
        {% endfor %}
      </div>
    {% endif %}

    <div class="social-share mt-4">
      <!-- Social Share Buttons -->
    </div>

 <div class="app-install mt-4">
      {% if page.app_logo %}
        <img src="{{ page.app_logo }}" alt="{{ page.app_name }} logo" class="app-logo mb-2" style="max-width: 50px;">
      {% endif %}
      <div class="app-info">
        <h3>{{ page.app_name }}</h3>
        <button id="install-button" class="btn btn-primary">Install</button>
      </div>
    </div>

    <!-- Install button logic -->
    <script>
      let deferredPrompt;
      const installButton = document.getElementById('install-button');
      installButton.style.display = 'none'; // Initially hide the button

      window.addEventListener('beforeinstallprompt', (e) => {
        console.log('beforeinstallprompt event fired');
        e.preventDefault();
        deferredPrompt = e;
        installButton.style.display = 'block'; // Show the button

        installButton.addEventListener('click', () => {
          console.log('Install button clicked');
          deferredPrompt.prompt();
          deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
              console.log('User accepted the A2HS prompt');
            } else {
              console.log('User dismissed the A2HS prompt');
            }
            deferredPrompt = null;
          });
        });
      });

      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('{{ site.baseurl }}/assets/sw.js')
        .then(registration => {
          console.log('Service Worker registered with scope:', registration.scope);
        }).catch(error => {
          console.log('Service Worker registration failed:', error);
        });
      }
    </script>
  </div>
</div>