{% assign matched_app = nil %}
{% assign page_permalink = page.permalink | strip %}

{% for app in site.data.apps %}
  {% for url in app.urls %}
    {% assign app_url = url | strip %}
    {% if app_url == page_permalink %}
      {% assign matched_app = app %}
    {% endif %}
  {% endfor %}
{% endfor %}

<div>
  <h4>Debugging Information</h4>
  <p>Page Permalink: "{{ page_permalink }}"</p>
  <p>Apps Data:</p>
  <ul>
    {% for app in site.data.apps %}
      <li>
        <strong>{{ app.name }}</strong>
        <ul>
          {% for url in app.urls %}
            <li>"{{ url | strip }}"</li>
          {% endfor %}
        </ul>
      </li>
    {% endfor %}
  </ul>
  {% if matched_app %}
    <p>Matched App: {{ matched_app.name }}</p>
  {% else %}
    <p>No matching app found</p>
  {% endif %}
</div>

{% if matched_app %}
  <div class="app-install mt-4">
    <img src="{{ matched_app.logo }}" alt="{{ matched_app.name }} logo" class="app-logo mb-2" style="max-width: 50px;">
    <div class="app-info">
      <h3>{{ matched_app.name }}</h3>
      <button id="install-button" class="btn btn-primary">Install</button>
    </div>
  </div>
{% endif %}